<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="JavaScript,">










<meta name="description" content="实现一个new 首先我们要明白构造函数(Foo) 实例(a) 原型(Foo.prototype) 三者之间的关系 Foo.prototype === Foo.prototype Foo的 prototype 指向原型 Foo.__proto__ === Function.prototype Foo的 _proto_ 指向 Function.prototype(所有函数的原型) a.__proto_">
<meta name="keywords" content="JavaScript">
<meta property="og:type" content="article">
<meta property="og:title" content="Javascript Interview">
<meta property="og:url" content="http://yoursite.com/2019/04/01/JavaScript/js_interview/index.html">
<meta property="og:site_name" content="Len&#39;s blog">
<meta property="og:description" content="实现一个new 首先我们要明白构造函数(Foo) 实例(a) 原型(Foo.prototype) 三者之间的关系 Foo.prototype === Foo.prototype Foo的 prototype 指向原型 Foo.__proto__ === Function.prototype Foo的 _proto_ 指向 Function.prototype(所有函数的原型) a.__proto_">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/images/js_interview/prototype.png">
<meta property="og:image" content="http://yoursite.com/images/js_interview/1.jpg">
<meta property="og:image" content="http://yoursite.com/images/js_interview/2.jpg">
<meta property="og:image" content="http://yoursite.com/images/js_interview/3.png">
<meta property="og:updated_time" content="2019-08-17T09:14:09.503Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Javascript Interview">
<meta name="twitter:description" content="实现一个new 首先我们要明白构造函数(Foo) 实例(a) 原型(Foo.prototype) 三者之间的关系 Foo.prototype === Foo.prototype Foo的 prototype 指向原型 Foo.__proto__ === Function.prototype Foo的 _proto_ 指向 Function.prototype(所有函数的原型) a.__proto_">
<meta name="twitter:image" content="http://yoursite.com/images/js_interview/prototype.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/04/01/JavaScript/js_interview/">





  <title>Javascript Interview | Len's blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Len's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">len's blog</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/01/JavaScript/js_interview/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Len lch">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Len's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Javascript Interview</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-04-01T11:12:00+08:00">
                2019-04-01
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Front-Back/" itemprop="url" rel="index">
                    <span itemprop="name">Front-Back</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="实现一个new"><a class="header-anchor" href="#实现一个new"></a>实现一个<code>new</code></h3>
<p>首先我们要明白<code>构造函数(Foo)</code> <code>实例(a)</code> <code>原型(Foo.prototype)</code> 三者之间的关系</p>
<p><code>Foo.prototype === Foo.prototype</code> Foo的 prototype 指向原型<br>
<code>Foo.__proto__ === Function.prototype</code> Foo的 _<em>proto_</em> 指向 Function.prototype(所有函数的原型)<br>
<code>a.__proto__ === Foo.prototype</code> 实例a的 _<em>proto_</em> 指向原型<br>
<code>Foo.prototype.constructor === Foo</code> 原型的 constructor 指向构造函数<br>
<code>Foo.prototype._proto__ === Object.prototype</code> 原型的 _proto__ 指向 Object.prototype(所有对象的原型)</p>
<p>如下图<br>
<img src="/images/js_interview/prototype.png" alt="prototype.png"></p>
<p>明白了三者之间的关系，现在让我们来实现<code>new</code>关键字</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">New</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>() <span class="comment">// 创建一个全新的对象</span></span><br><span class="line">  <span class="keyword">const</span> target = <span class="built_in">Array</span>.prototype.shift.call(<span class="built_in">arguments</span>) <span class="comment">// 这里为什么call，因为arguments是一个类数组的对象，同时shift会该变原数组</span></span><br><span class="line">  obj.__proto__ = target.prototype <span class="comment">// 实例对象的 __proto__ 指向构造函数的原型，使得新生成的对象可以使用target原型上的方法和属性</span></span><br><span class="line">  <span class="keyword">const</span> res = target.apply(obj, <span class="built_in">arguments</span>) <span class="comment">// 改变target的this指向</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">typeof</span> res === <span class="string">'object'</span> ? res : obj <span class="comment">// 有可能target里面返回的不是object</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name</span><br><span class="line">  <span class="keyword">this</span>.age = age</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span> <span class="comment">// return 'test' // 这里也可能会返回一个字符串</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> res = New(test, <span class="string">'xiaoming'</span>, <span class="number">20</span>)</span><br><span class="line"><span class="built_in">console</span>.log(res) <span class="comment">// &#123;name: 'xiaoming', age: 20&#125;</span></span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h3 id="实现一个json-stringify"><a class="header-anchor" href="#实现一个json-stringify"></a>实现一个<code>JSON.stringify</code></h3>
<ol>
<li>Boolean | Number | String 会自动转换成对应的原始值</li>
<li>undefined、任意函数以及 symbol，会被忽略，或者被转换成 null。</li>
<li>不可枚举的属性会被忽略</li>
<li>如果一个对象的属性通过某种间接的方式指回该对象本身，即循环引用，属性也会被忽略</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">jsonStringify</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> type = <span class="keyword">typeof</span> obj</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (type !== <span class="string">'object'</span>) &#123;</span><br><span class="line">    <span class="comment">// string, undefined, function 直接加 ““ 返回</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="regexp">/string|undefined|function/</span>.test(type)) &#123;</span><br><span class="line">      obj = <span class="string">'"'</span> + obj + <span class="string">'"'</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">String</span>(obj)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 如果 obj 为 object， 循环遍历对象</span></span><br><span class="line">    <span class="comment">// 如果值为 string， undefined， function， 加 ”“ 返回</span></span><br><span class="line">    <span class="comment">// 如果值为 object， 递归调用自身。</span></span><br><span class="line">    <span class="keyword">let</span> json = []</span><br><span class="line">    <span class="keyword">let</span> arr = (obj &amp;&amp; obj.constructor === <span class="built_in">Array</span>)</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> k <span class="keyword">in</span> obj) &#123;</span><br><span class="line">      <span class="keyword">let</span> v = obj[k]</span><br><span class="line">      <span class="keyword">let</span> type = <span class="keyword">typeof</span> v</span><br><span class="line">      <span class="comment">// 直接返回</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="regexp">/string|undefined|function/</span>.test(type)) &#123;</span><br><span class="line">        v = <span class="string">'"'</span> + v + <span class="string">'"'</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'object'</span>) &#123;</span><br><span class="line">        <span class="comment">// 递归调用</span></span><br><span class="line">        v = jsonStringify(v)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// "key": "value"</span></span><br><span class="line">      json.push((arr ? <span class="string">""</span> : <span class="string">'"'</span> + k + <span class="string">'":'</span>) + <span class="built_in">String</span>(v))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 判断是array还是object</span></span><br><span class="line">    <span class="comment">// tips: String([1, 2, 3]) ==&gt; "1, 2, 3" 隐士类型转换</span></span><br><span class="line">    <span class="keyword">return</span> (arr ? <span class="string">"["</span> : <span class="string">"&#123;"</span>) + <span class="built_in">String</span>(json) + (arr ? <span class="string">"]"</span> : <span class="string">"&#125;"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">jsonStringify(&#123;<span class="attr">x</span> : <span class="number">5</span>&#125;) <span class="comment">// "&#123;"x":5&#125;"</span></span><br><span class="line">jsonStringify([<span class="number">1</span>, <span class="string">"false"</span>, <span class="literal">false</span>]) <span class="comment">// "[1,"false",false]"</span></span><br><span class="line">jsonStringify(&#123;<span class="attr">b</span>: <span class="literal">undefined</span>&#125;) <span class="comment">// "&#123;"b":"undefined"&#125;"</span></span><br></pre></td></tr></table></figure>
<h3 id="实现一个json-parse"><a class="header-anchor" href="#实现一个json-parse"></a>实现一个<code>JSON.parse</code></h3>
<ol>
<li>直接使用eval</li>
<li>使用function</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">jsonParse1</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">eval</span>(<span class="string">'('</span> + str + <span class="string">')'</span>) </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">jsonParse2</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">'return '</span> + str)()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">'&#123; "age": 20, "name": "jack" &#125;'</span></span><br><span class="line"></span><br><span class="line">jsonParse1(str)  <span class="comment">// &#123;age: 20, name: 'jack'&#125;</span></span><br><span class="line">jsonParse2(str) <span class="comment">// &#123;age: 20, name: 'jack'&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="浅拷贝-深拷贝"><a class="header-anchor" href="#浅拷贝-深拷贝"></a>浅拷贝、深拷贝</h3>
<p>拷贝都是对引用类型而言的</p>
<ol>
<li>赋值</li>
</ol>
<ul>
<li>原始数据： 存储在栈中。</li>
<li>引用类型： 栈中存放的是堆中数据的引用。</li>
<li>赋值的是栈中的地址，而不是堆中的数据。你改我也改</li>
</ul>
<ol start="2">
<li>浅拷贝<br>
会在堆中赋值一份新的数据地址，你改我不会改。<strong>但是</strong>，浅拷贝只会拷贝一层，如果key的value又是一个对象，这样他两执行的还是同一份堆中的数据，所以你改我也会改</li>
<li>深拷贝<br>
深拷贝就是完全赋值，两个引用对象在堆中的数据不会相互影响，不管你有嵌套几层。你改我永远也不会改</li>
</ol>
<p>说明</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj1 = &#123;</span><br><span class="line">  name: <span class="string">'len'</span>,</span><br><span class="line">  age: <span class="number">20</span>,</span><br><span class="line">  test: [<span class="number">1</span>, [<span class="number">2</span>, <span class="number">3</span>], <span class="number">4</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj2 = obj1 <span class="comment">// 赋值</span></span><br><span class="line"></span><br><span class="line">obj2.name = <span class="string">'lance'</span></span><br><span class="line"><span class="built_in">console</span>.log(obj1.name) <span class="comment">// lance</span></span><br><span class="line"></span><br><span class="line">obj2.age = <span class="number">18</span></span><br><span class="line"><span class="built_in">console</span>.log(obj1.name) <span class="comment">// 18</span></span><br><span class="line"></span><br><span class="line">obj2.test[<span class="number">1</span>] = [<span class="number">7</span>, <span class="number">8</span>]</span><br><span class="line"><span class="built_in">console</span>.log(obj1.test[<span class="number">1</span>]) <span class="comment">// [7, 8]</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">shallowCopy</span>(<span class="params">src</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> dst = &#123;&#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> prop <span class="keyword">in</span> src) &#123;</span><br><span class="line">    <span class="keyword">if</span> (src.hasOwnProperty(prop)) &#123;</span><br><span class="line">      dst[prop] = src[prop]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> dst</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj3 = shallowCopy(obj1)</span><br><span class="line"></span><br><span class="line">obj3.name = <span class="string">'test'</span></span><br><span class="line">obj3.test[<span class="number">1</span>] = [<span class="string">'78'</span>, <span class="string">'89'</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(obj1.name) <span class="comment">// lance</span></span><br><span class="line"><span class="built_in">console</span>.log(obj3.name) <span class="comment">// test</span></span><br><span class="line"><span class="built_in">console</span>.log(obj1.test[<span class="number">1</span>]) <span class="comment">// ['78', '89']</span></span><br><span class="line"><span class="built_in">console</span>.log(obj3.test[<span class="number">1</span>]) <span class="comment">// ['78', '89']</span></span><br></pre></td></tr></table></figure>
<p><strong>浅拷贝的实现方式</strong></p>
<ol>
<li>Object.assign()</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// assign</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  name: <span class="string">'len'</span>,</span><br><span class="line">  a: &#123;</span><br><span class="line">    a: <span class="string">'len'</span>,</span><br><span class="line">    b: <span class="number">20</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> copyObj = <span class="built_in">Object</span>.assign(&#123;&#125;, obj)</span><br><span class="line">copyObj.a.a = <span class="string">'lance'</span></span><br><span class="line">copyObj.a.b = <span class="number">21</span></span><br><span class="line">copyObj.name = <span class="string">'lance'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 浅拷贝只拷贝一层，所以 obj.name 不会被更改</span></span><br><span class="line"><span class="built_in">console</span>.log(copyObj) <span class="comment">// &#123; name: 'lance', a: &#123; a: 'lence', age: 21 &#125; &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(obj) <span class="comment">// &#123; name: 'len', a: &#123; a: 'lence', age: 21 &#125; &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 当obj只有一层的时候，是深拷贝 (**********)</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  name: <span class="string">'len'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> copyObj = <span class="built_in">Object</span>.assign(&#123;&#125;, obj)</span><br><span class="line">copyObj.name = <span class="string">'lance'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(copyObj) <span class="comment">// &#123;name: "lance"&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(obj) <span class="comment">// &#123;name: "len"&#125;</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>Array.prototype.concat()</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, &#123;</span><br><span class="line">  name: <span class="string">'len'</span></span><br><span class="line">&#125;]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr2 = arr.concat()</span><br><span class="line">arr2[<span class="number">2</span>].name = <span class="string">'lance'</span></span><br><span class="line">arr2[<span class="number">0</span>] = <span class="string">'11111'</span></span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// [1, 2, &#123; name: 'lance' &#125;]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr2) <span class="comment">// ['11111', 2, &#123; name: 'lance' &#125;]</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>Array.prototype.slice()</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, &#123;</span><br><span class="line">  name: <span class="string">'len'</span></span><br><span class="line">&#125;]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr2 = arr.slice()</span><br><span class="line">arr2[<span class="number">2</span>].name = <span class="string">'lance'</span></span><br><span class="line">arr2[<span class="number">0</span>] = <span class="string">'11111'</span></span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// [1, 2, &#123; name: 'lance' &#125;]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr2) <span class="comment">// ['11111', 2, &#123; name: 'lance' &#125;]</span></span><br></pre></td></tr></table></figure>
<ol start="4">
<li>手动实现</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">shallowCopy</span>(<span class="params">src</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> dst = &#123;&#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> prop <span class="keyword">in</span> src) &#123;</span><br><span class="line">    <span class="keyword">if</span> (src.hasOwnProperty(prop)) &#123;</span><br><span class="line">      dst[prop] = src[prop]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> dst</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>深拷贝实现的方法</strong></p>
<ol>
<li>JSON.parse(JSON.stringify())<br>
前面实现 <code>JSON.stringify()</code> 的时候有说道，函会被处理成 null， 所以这种方法不适合函数</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, &#123;</span><br><span class="line">  name: <span class="string">'len'</span></span><br><span class="line">&#125;]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr2 = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(arr))</span><br><span class="line"></span><br><span class="line">arr2[<span class="number">2</span>].name = <span class="string">'lance'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// [1, 2, &#123; name: 'len' &#125;]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr2) <span class="comment">// [1, 2, &#123; name: 'lance' &#125;]</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>手动实现</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkType</span>(<span class="params">target</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(target).slice(<span class="number">8</span>, <span class="number">-1</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clone</span>(<span class="params">target</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> result,</span><br><span class="line">    type = checkType(target)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (type === <span class="string">'Object'</span>) &#123;</span><br><span class="line">    result = &#123;&#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'Array'</span>) &#123;</span><br><span class="line">    result = []</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> target</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> target) &#123;</span><br><span class="line">    <span class="keyword">let</span> value = target[i]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (checkType(value) === <span class="string">'Object'</span> ||</span><br><span class="line">      checkType(value) === <span class="string">'Array'</span>) &#123;</span><br><span class="line">        result[i] = clone(value)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      result[i] = value</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, &#123;</span><br><span class="line">  name: <span class="string">'len'</span></span><br><span class="line">&#125;]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr2 = clone(arr)</span><br><span class="line">arr2[<span class="number">0</span>] = <span class="string">'1111'</span></span><br><span class="line">arr2[<span class="number">2</span>].name = <span class="string">'lance'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// [1, 2, &#123; name: "len" &#125;]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr2) <span class="comment">// ['1111', 2, &#123; name: 'lance' &#125;]</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>手动实现</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isObject</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">typeof</span> obj === <span class="string">'object'</span> &amp;&amp; obj != <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepCopy</span>(<span class="params">src</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!isObject(src)) <span class="keyword">return</span> src</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> dst = <span class="built_in">Array</span>.isArray(src) ? [] : &#123;&#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> prop <span class="keyword">in</span> src) &#123;</span><br><span class="line">    <span class="keyword">if</span> (src.hasOwnProperty(prop)) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> src[prop] === <span class="string">'object'</span>) &#123;</span><br><span class="line">        dst[prop] = deepCopy(src[prop])</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        dst[prop] = src[prop]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> dst</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>关于浅拷贝和深拷贝，上面的代码多多少少还是有些问题的，有兴趣的可以进行深入</p>
<h3 id="实现一个call"><a class="header-anchor" href="#实现一个call"></a>实现一个<code>call</code></h3>
<p>思路：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  name: <span class="string">'len'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">print</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">print.call(obj) <span class="comment">// len</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// =====&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  name: <span class="string">'len'</span>,</span><br><span class="line">  print: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">obj.name <span class="comment">// len</span></span><br></pre></td></tr></table></figure>
<p>call改变调用者<code>this</code>的指向，传参方式：一个一个传。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.call1 = <span class="function"><span class="keyword">function</span>(<span class="params">ctx = window</span>) </span>&#123;</span><br><span class="line">  ctx.fn = <span class="keyword">this</span></span><br><span class="line">  <span class="keyword">let</span> args = [...arguments].slice(<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">let</span> res = ctx.fn(...args)</span><br><span class="line">  <span class="keyword">delete</span> ctx.fn</span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="实现一个apply"><a class="header-anchor" href="#实现一个apply"></a>实现一个<code>apply</code></h3>
<p>apply改变调用者的<code>this</code>指向，传参方式： 数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.apply1 = <span class="function"><span class="keyword">function</span>(<span class="params">ctx = window</span>) </span>&#123;</span><br><span class="line">  ctx.fn = <span class="keyword">this</span></span><br><span class="line">  <span class="keyword">let</span> args = <span class="built_in">arguments</span>[<span class="number">1</span>]</span><br><span class="line">  <span class="keyword">let</span> res</span><br><span class="line"></span><br><span class="line">  args.length &gt; <span class="number">0</span> ? res = ctx.fn(...args) : res = ctx.fn()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">delete</span> ctx.fn</span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="实现一个bind"><a class="header-anchor" href="#实现一个bind"></a>实现一个<code>bind</code></h3>
<p>bind是将一个函数绑定至另一个函数上，返回一个函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.bind1 = <span class="function"><span class="keyword">function</span>(<span class="params">ctx</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 必须是函数调用call</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="keyword">this</span> !== <span class="string">'function'</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="built_in">Error</span>(<span class="string">'call target should be a function'</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> self = <span class="keyword">this</span></span><br><span class="line">  <span class="keyword">let</span> binArgs = [...arguments].slice(<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">let</span> resFn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 返回的函数也有可能会传参， 所以这里需要concat一下</span></span><br><span class="line">    <span class="comment">// 返回的函数也有可能使用 new 关键字，所以这里需要判断下</span></span><br><span class="line">    self.apply(<span class="keyword">this</span> <span class="keyword">instanceof</span> resFn ? <span class="keyword">this</span> : ctx, bindArgs.contact([...arguments]))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">temp</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  <span class="comment">// 保存对原型链的引用</span></span><br><span class="line">  temp.prototype = <span class="keyword">this</span>.prototype <span class="comment">// 将原型保存在temp.prototype上</span></span><br><span class="line">  resFn.prototype = <span class="keyword">new</span> temp() <span class="comment">// new temp().__proto__ === temp.prototype</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> resFn</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="当你刷新网页的时候-怎么知道用户在-看"><a class="header-anchor" href="#当你刷新网页的时候-怎么知道用户在-看"></a>当你刷新网页的时候，怎么知道用户在“看”</h3>
<ol>
<li><code>document.hidden</code> 来判断</li>
<li><code>focus</code> 和 <code>blur</code> 来判断</li>
<li><code>mouseover</code> 和 <code>mouseout</code> 来判断</li>
</ol>
<h3 id="for-in-和-for-of-的区别"><a class="header-anchor" href="#for-in-和-for-of-的区别"></a>for…in 和 for…of 的区别</h3>
<p>for…in 只能获得对象的键名<br>
for…of 允许遍历获得键值<br>
for…of 循环只返回具有数字索引的属性，也就是必须具有iterable特性，普通对象遍历不了。类对象<code>arguments</code>可以</p>
<h3 id="window-的-onload-事件和-documentcontentloaded-谁先谁后"><a class="header-anchor" href="#window-的-onload-事件和-documentcontentloaded-谁先谁后"></a>window 的 onload 事件和 documentContentLoaded 谁先谁后</h3>
<p>documentContentLoaded 先</p>
<p>window.onload 是等到页面的所有资源（html，js，css，图片，音频，视频）都加载完毕后才会执行</p>
<p>documentContentLoaded 是<code>dom树</code>构建完毕之后就执行的</p>
<h3 id="实现数组扁平化"><a class="header-anchor" href="#实现数组扁平化"></a>实现数组扁平化</h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第一种方式，循环遍历，递归调用。so esay</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flatten1</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> res = []</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(arr[i])) &#123;</span><br><span class="line">      res = res.concat(flatten1(arr[i]))</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      res.push(arr[i])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 利用reduce的特性，只是第一种方法的 装逼写法而已 O(∩_∩)O哈哈~</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flatten2</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> arr.reduce(<span class="function">(<span class="params">prev, item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> prev.concat(<span class="built_in">Array</span>.isArray(item) ? flatten2(item) : item)</span><br><span class="line">  &#125;, [])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 利用some特性，加es6的扩展运算符</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flatten3</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 如果 arr 中一直有数组，那就一直循环下去</span></span><br><span class="line">  <span class="keyword">while</span> (arr.some(<span class="function"><span class="params">item</span> =&gt;</span> <span class="built_in">Array</span>.isArray(item))) &#123;</span><br><span class="line">    arr = [].concat(...arr)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这个利用类型隐士转换，然后利用map将字符串转换成数字</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flatten4</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> arrStr = arr.toString()</span><br><span class="line">  <span class="keyword">return</span> arrStr.split(<span class="string">','</span>).map(<span class="built_in">Number</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [ <span class="number">10</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>], [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, [<span class="number">11</span>, <span class="number">12</span>, [<span class="number">12</span>, <span class="number">13</span>, [<span class="number">14</span>]]]]]</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(flatten1(arr)) <span class="comment">// [ 10, 1, 2, 2, 3, 4, 5, 5, 6, 7, 8, 9, 11, 12, 12, 13, 14 ]</span></span><br><span class="line"><span class="built_in">console</span>.log(flatten2(arr)) <span class="comment">// [ 10, 1, 2, 2, 3, 4, 5, 5, 6, 7, 8, 9, 11, 12, 12, 13, 14 ]</span></span><br><span class="line"><span class="built_in">console</span>.log(flatten3(arr)) <span class="comment">// [ 10, 1, 2, 2, 3, 4, 5, 5, 6, 7, 8, 9, 11, 12, 12, 13, 14 ]</span></span><br><span class="line"><span class="built_in">console</span>.log(flatten4(arr)) <span class="comment">// [ 10, 1, 2, 2, 3, 4, 5, 5, 6, 7, 8, 9, 11, 12, 12, 13, 14 ]</span></span><br></pre></td></tr></table></figure>
<h3 id="实现一个防抖"><a class="header-anchor" href="#实现一个防抖"></a>实现一个<code>防抖</code></h3>
<p>防抖的原理：在事件停止触发的n秒后执行</p>
<p>定时器实现</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">func, wait = <span class="number">50</span>, immediate</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> timeout</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (immediate) &#123;</span><br><span class="line">      fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (timeout) clearTimeout(timeout)</span><br><span class="line">  </span><br><span class="line">    timeout = setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      timeout = <span class="literal">null</span></span><br><span class="line">      func.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>)</span><br><span class="line">    &#125;, wait)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结合实例： 滚动防抖</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 滚动函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">realFunc</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'success'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 采用防抖</span></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'scroll'</span>, debounce(realFunc, <span class="number">500</span>))</span><br><span class="line"><span class="comment">// 不采用防抖</span></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'scroll'</span>, realFunc)</span><br></pre></td></tr></table></figure>
<h3 id="实现一个节流"><a class="header-anchor" href="#实现一个节流"></a>实现一个<code>节流</code></h3>
<p>节流的原理：每隔n秒执行一次事件</p>
<p>定时器和时间戳实现</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定时器</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle1</span>(<span class="params">func, wait = <span class="number">50</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> timeout</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> args = [...arguments]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!timeout) &#123;</span><br><span class="line">      timeout = setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        timeout = <span class="literal">null</span></span><br><span class="line">        func.apply(<span class="keyword">this</span>, args)</span><br><span class="line">      &#125;, wait)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 时间戳</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle2</span>(<span class="params">func, wait = <span class="number">50</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> prev = <span class="number">0</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> now = +<span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">    <span class="keyword">let</span> args = <span class="built_in">arguments</span></span><br><span class="line">    <span class="keyword">if</span> (now - prev &gt; wait) &#123;</span><br><span class="line">      func.apply(<span class="keyword">this</span>, args)</span><br><span class="line">      prev = now</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="实现一个instanceof"><a class="header-anchor" href="#实现一个instanceof"></a>实现一个<code>instanceof</code></h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 左边是对象，右边是构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">instanceOf</span>(<span class="params">left, right</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 对象的 __proto__ 指向原型</span></span><br><span class="line">  <span class="keyword">let</span> proto = left.__proto__</span><br><span class="line">  <span class="comment">// 构造函数的 prototype 指向原型</span></span><br><span class="line">  <span class="keyword">let</span> prototype = right.prototype</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (proto === <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment">// 相等，即为true</span></span><br><span class="line">    <span class="keyword">if</span> (proto === prototype) <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment">// 这里处理继承的情况</span></span><br><span class="line">    proto = proto.__proto__</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="下面代码输出什么-为什么？"><a class="header-anchor" href="#下面代码输出什么-为什么？"></a>下面代码输出什么, 为什么？</h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  <span class="string">'2'</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="string">'3'</span>: <span class="number">3</span>,</span><br><span class="line">  <span class="string">'splice'</span>: <span class="built_in">Array</span>.prototype.splice,</span><br><span class="line">  <span class="string">'push'</span>: <span class="built_in">Array</span>.prototype.push</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">obj.push(<span class="number">0</span>)</span><br><span class="line">obj.push(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">console</span>.log(obj) <span class="comment">// &#123; 0 : 0, 1: 1, 2: 2, 3: 3, length: 2, splice: f, push: f &#125;</span></span><br><span class="line">obj.splice(<span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line"><span class="built_in">console</span>.log(obj) <span class="comment">// &#123; 0: 1, 2: 2, 3: 3 length: 1, splice: f, push: f &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用pbj.push的时候，会将obj转换成类数组对象，所以会添加length属性。</span></span><br></pre></td></tr></table></figure>
<h3 id="下面代码输出什么"><a class="header-anchor" href="#下面代码输出什么"></a>下面代码输出什么 ?</h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> a = <span class="number">0</span>; a &lt; <span class="number">5</span>; a++) &#123;</span><br><span class="line">  a = <span class="string">'hello'</span></span><br><span class="line">  <span class="built_in">console</span>.log(a)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 上面输出一个Hello</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> b = <span class="number">0</span>; b &lt; <span class="number">5</span>; b++) &#123;</span><br><span class="line">  <span class="keyword">let</span> b = <span class="string">'hello'</span></span><br><span class="line">  <span class="built_in">console</span>.log(b)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 上面输出 5 个hello</span></span><br></pre></td></tr></table></figure>
<h3 id="下面代码输出什么？"><a class="header-anchor" href="#下面代码输出什么？"></a>下面代码输出什么？</h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123; <span class="attr">n</span>: <span class="number">1</span> &#125;</span><br><span class="line"><span class="keyword">var</span> b = a</span><br><span class="line">a.x = a = &#123; <span class="attr">n</span>: <span class="number">2</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a.x) <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(b.x) <span class="comment">// &#123; n: 2 &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(b.x === a) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">-------------</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = &#123; <span class="attr">n</span>: <span class="number">1</span> &#125;</span><br><span class="line"><span class="keyword">var</span> b = a</span><br><span class="line">a = a.x = &#123; <span class="attr">n</span>: <span class="number">2</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a.x) <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(b.x) <span class="comment">// &#123; n: 2 &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(b.x === a) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">----------</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = &#123; <span class="attr">n</span>: <span class="number">1</span> &#125;</span><br><span class="line"><span class="keyword">var</span> b = a </span><br><span class="line">a.x = (a = &#123; <span class="attr">n</span>: <span class="number">2</span> &#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a.x) <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(b.x) <span class="comment">// &#123; n: 2 &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(b.x === a) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>优先级: () &gt; . &gt; =</p>
<p>对于 1 和 2， 这样的结果是没问题的，如图。<br>
<img src="/images/js_interview/1.jpg" alt="1.png"></p>
<p>对于第三个，大家可能有些疑问，如何按照优先级来的话，结果应该是:<code>a = {n: 2, x: {n: 2}}, b = {n: 1}</code></p>
<p>这里其实和运算符有限级没有关系。求值操作是从左到至右的。所以还是会先求 a.x 的值。</p>
<p>不知道大家能不能理解，多多体会应该就理解了。(<em><sup>__</sup></em>) 嘻嘻……</p>
<h3 id="实现下面这道题中的-machine-函数功能"><a class="header-anchor" href="#实现下面这道题中的-machine-函数功能"></a>实现下面这道题中的 machine 函数功能</h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">machine</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">machine(<span class="string">'len'</span>).execute() <span class="comment">// start len</span></span><br><span class="line">machine(<span class="string">'len'</span>).do(<span class="string">'eat'</span>).execute() <span class="comment">// start len, len eat</span></span><br><span class="line">machine(<span class="string">'len'</span>).wait(<span class="number">5</span>).do(<span class="string">'eat'</span>).execute() <span class="comment">// start len, wait s5, len eat</span></span><br><span class="line">machine(<span class="string">'len'</span>).waitFirst(<span class="number">5</span>).do(<span class="string">'eat'</span>).execute() <span class="comment">// wait 5s, start len, len eat.</span></span><br><span class="line"><span class="string">``</span><span class="string">` </span></span><br><span class="line"><span class="string">分析：</span></span><br><span class="line"><span class="string">1. 默认 `</span>execute<span class="string">` 是第一个执行的， `</span>waitFirst<span class="string">` 例外。</span></span><br><span class="line"><span class="string">2. 链式调用，在每个函数里面返回this</span></span><br><span class="line"><span class="string">3. 默认都写成异步，然后在一个队列里面处理，同步直接执行，异步，使用`</span>promise<span class="string">`来处理</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>js</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">machine</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 新生成一个类来进行处理</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Action(name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 处理异步回调</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">defer</span>(<span class="params">time, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 执行callback回调</span></span><br><span class="line">      resolve(callback())</span><br><span class="line">    &#125;, time * <span class="number">1000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 事件队列</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QueueItem</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(time, callback) &#123;</span><br><span class="line">    <span class="keyword">this</span>.time = time</span><br><span class="line">    <span class="keyword">this</span>.callback = callback</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Action</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name</span><br><span class="line">    <span class="comment">// 事件队列， 默认有一个，也就是执行 execute 时候打印的</span></span><br><span class="line">    <span class="keyword">this</span>.queue = [</span><br><span class="line">      <span class="keyword">new</span> QueueItem(<span class="number">0</span>, () =&gt; <span class="built_in">console</span>.log(<span class="string">`start <span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>`</span>))</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// do 函数是同步的</span></span><br><span class="line">  <span class="keyword">do</span>(what) &#123;</span><br><span class="line">    <span class="keyword">this</span>.queue.push(</span><br><span class="line">      <span class="keyword">new</span> QueueItem(<span class="number">0</span>, () =&gt; <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span> <span class="subst">$&#123;what&#125;</span>`</span>))</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// wait 函数是异步的</span></span><br><span class="line">  wait(time) &#123;</span><br><span class="line">    <span class="keyword">this</span>.queue.push(</span><br><span class="line">      <span class="keyword">new</span> QueueItem(time, () =&gt; <span class="built_in">console</span>.log(<span class="string">`wait <span class="subst">$&#123;time&#125;</span>s`</span>))</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// waitFirst 函数是异步的，默认是第一个</span></span><br><span class="line">  waitFirst(time) &#123;</span><br><span class="line">    <span class="comment">// unshift 来添加到队列的最前面</span></span><br><span class="line">    <span class="keyword">this</span>.queue.unshift(</span><br><span class="line">      <span class="keyword">new</span> QueueItem(time, () =&gt; <span class="built_in">console</span>.log(<span class="string">`wait <span class="subst">$&#123;time&#125;</span>s`</span>))</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// execute 是最后执行的</span></span><br><span class="line">  <span class="keyword">async</span> execute() &#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="keyword">this</span>.queue.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">// 去除队列最前面的，也就是数组中的第一个，同时改变数组</span></span><br><span class="line">      <span class="keyword">const</span> cur = <span class="keyword">this</span>.queue.shift()</span><br><span class="line">      <span class="comment">// 如果是同步的，就直接执行callback</span></span><br><span class="line">      <span class="keyword">if</span> (!cur.time) &#123;</span><br><span class="line">        cur.callback()</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 异步执行 callback</span></span><br><span class="line">      <span class="keyword">await</span> defer(cur.time, cur.callback)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="实现一个compose"><a class="header-anchor" href="#实现一个compose"></a>实现一个compose</h3>
<ul>
<li><code>compose</code>的参数是函数，返回值也是一个函数</li>
<li>除了第一个函数的接受参数，其他函数的接受参数都是上一个函数的返回值</li>
<li>compose可以接受任意的参数，所有参数都是函数</li>
</ul>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce" target="_blank" rel="noopener">reduce API</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compose</span>(<span class="params">...funcs</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (funcs.length === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">arg</span> =&gt;</span> arg</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (funcs.length === <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> funcs[<span class="number">0</span>]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 这个可能有点难理解</span></span><br><span class="line">  <span class="comment">// return funcs.reduce((a, b) =&gt; (...args) =&gt; a(b(...args)))</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 写成这样能好理解点</span></span><br><span class="line">  <span class="keyword">return</span> funcs.reduce(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">(<span class="params">...args</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> a(b(...args))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* </span></span><br><span class="line"><span class="comment">    第一次: </span></span><br><span class="line"><span class="comment">    a = fn1</span></span><br><span class="line"><span class="comment">    b = fn2</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    return (...args) =&gt; &#123;</span></span><br><span class="line"><span class="comment">      return fn1(fn2(...args))</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    第二次计算的时候，fn3是作为第一次返回函数的参数传入的。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    第二次：</span></span><br><span class="line"><span class="comment">    a = (...args) =&gt; &#123;</span></span><br><span class="line"><span class="comment">      return fn1(fn2(...args))</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    b = fn3</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    ==&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    ...args === fn3(...args)</span></span><br><span class="line"><span class="comment">    (fn3(...args)) =&gt; &#123;</span></span><br><span class="line"><span class="comment">      return fn1(fn2(fn3(...args)))</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    return (...args) =&gt; &#123;</span></span><br><span class="line"><span class="comment">      return fn1(fn2(fn3(...args)))</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    以此类推</span></span><br><span class="line"><span class="comment">    .</span></span><br><span class="line"><span class="comment">    .</span></span><br><span class="line"><span class="comment">    .</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fn1 = <span class="function"><span class="params">val</span> =&gt;</span> <span class="string">'fn1-'</span> + val</span><br><span class="line"><span class="keyword">const</span> fn2 = <span class="function"><span class="params">val</span> =&gt;</span> <span class="string">'fn2-'</span> + val</span><br><span class="line"><span class="keyword">const</span> fn3 = <span class="function"><span class="params">val</span> =&gt;</span> <span class="string">'fn3-'</span> + val</span><br><span class="line"></span><br><span class="line">compose(fn1, fn2, fn3)(<span class="string">'test'</span>) <span class="comment">// fn1-fn2-fn3-test</span></span><br></pre></td></tr></table></figure>
<h3 id="实现如下函数-可以批量请求数据-所有-url-地址在-urls-参数中-同时可以通过-max-参数控制请求的并发度-当所有的请求结束后-需要执行-callback-回调函数"><a class="header-anchor" href="#实现如下函数-可以批量请求数据-所有-url-地址在-urls-参数中-同时可以通过-max-参数控制请求的并发度-当所有的请求结束后-需要执行-callback-回调函数"></a>实现如下函数，可以批量请求数据，所有 URL 地址在 urls 参数中，同时可以通过 max 参数控制请求的并发度，当所有的请求结束后，需要执行 callback 回调函数</h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sendRequest</span>(<span class="params">urls: string[], max: number, callback: (</span>) =&gt; <span class="title">void</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>主线程先执行,然后再执行fetch().finally的微任务.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 版本一</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">limitConcurrency</span>(<span class="params">fn, max</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> pendingTasks = <span class="keyword">new</span> <span class="built_in">Set</span>()</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">async</span> <span class="function"><span class="keyword">function</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (pendingTasks.size &gt; max) &#123;</span><br><span class="line">      <span class="keyword">await</span> <span class="built_in">Promise</span>.race(pendingTasks)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> promise = fn.apply(<span class="keyword">this</span>, args)</span><br><span class="line">    <span class="comment">// promise all 只要有出错,callback会提前执行.</span></span><br><span class="line">    <span class="keyword">const</span> res = promise.catch(<span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;)</span><br><span class="line">    pendingTasks.add(res)</span><br><span class="line">    <span class="keyword">await</span> res</span><br><span class="line">    pendingTasks.delete(res)</span><br><span class="line">    <span class="keyword">return</span> promise</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sendRequest</span>(<span class="params">urls, max, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> limitFetch = limitConcurrency(fetch, max)</span><br><span class="line">  <span class="keyword">await</span> <span class="built_in">Promise</span>.all(urls.map(limitFetch)) <span class="comment">// 一开始先往队列里面塞max个,然后剩下的,谁快谁执行</span></span><br><span class="line">  callback()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 版本二</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sendRequest</span>(<span class="params">urls, max, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> len = urls.length</span><br><span class="line">  <span class="keyword">let</span> idx = <span class="number">0</span> </span><br><span class="line">  <span class="keyword">let</span> counter = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">_request</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// while 会一直执行,直到counter === len</span></span><br><span class="line">    <span class="keyword">while</span> (idx &lt; len &amp;&amp; max &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      fetch(urls[idx++]).finally(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        max++</span><br><span class="line">        counter++</span><br><span class="line">        <span class="keyword">if</span> (counter === len) &#123;</span><br><span class="line">          <span class="keyword">return</span> callback()</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          _request()</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  _request()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="如何使-a-1-a-2-a-3-为-true"><a class="header-anchor" href="#如何使-a-1-a-2-a-3-为-true"></a>如何使 <code>a === 1 &amp;&amp; a === 2 &amp;&amp; a === 3</code> 为 <code>true</code></h3>
<p>这题主要设计到隐士类型转换</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = &#123;</span><br><span class="line">  i: <span class="number">1</span>,</span><br><span class="line">  toString() &#123;</span><br><span class="line">    <span class="keyword">return</span> a.i++</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// valueOf() &#123;</span></span><br><span class="line">  <span class="comment">//   return a.i++</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注意: 这里不是 ===, a.i是引用类型的值</span></span><br><span class="line"><span class="keyword">if</span> (a == <span class="number">1</span> &amp;&amp; a == <span class="number">2</span> &amp;&amp; a == <span class="number">3</span>) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'whoa!'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// a == 1 的时候, js引擎会尝试将a转换成数字, 首先调用a的valueOf() 来判断, 不行则继续调用toString()</span></span><br></pre></td></tr></table></figure>
<h3 id="实现快排"><a class="header-anchor" href="#实现快排"></a>实现快排</h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 版本1, 新创建两个数组, 会增加空间开销</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">quickSort</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 递归结束条件</span></span><br><span class="line">  <span class="keyword">if</span> (arr.length &lt;= <span class="number">1</span>) <span class="keyword">return</span> arr</span><br><span class="line">  <span class="keyword">let</span> mid = <span class="built_in">Math</span>.floor(arr.length / <span class="number">2</span>)</span><br><span class="line">  <span class="keyword">let</span> left = []</span><br><span class="line">  <span class="keyword">let</span> right = []</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (arr[i] &lt; arr[mid]) &#123;</span><br><span class="line">      left.push(arr[i])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (arr[i] &gt; arr[mid]) &#123;</span><br><span class="line">      right.push(arr[i])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> quickSort(left).concat(arr[mid], quickSort(right))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">5</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>]</span><br><span class="line"><span class="built_in">console</span>.log(quickSort(arr)) <span class="comment">// [1, 2, 3, 4, 5, 6]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 版本2, 用时间换空间</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">quickSort</span>(<span class="params">arr, start, end</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 递归结束条件</span></span><br><span class="line">  <span class="keyword">if</span> (start &gt;= end) <span class="keyword">return</span> </span><br><span class="line"></span><br><span class="line">  <span class="comment">// 左指针</span></span><br><span class="line">  <span class="keyword">let</span> left = start</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 右指针</span></span><br><span class="line">  <span class="keyword">let</span> right = end</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 基准值</span></span><br><span class="line">  <span class="keyword">let</span> basicValue = arr[start] <span class="comment">// 默认为数组中第一个值</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">    <span class="comment">// 先从右往左比较, 直到找到比基准值小的</span></span><br><span class="line">    <span class="keyword">while</span> (left &lt; right &amp;&amp; arr[right] &gt;= basicValue) &#123;</span><br><span class="line">      right--</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 将右边的值比基准值小的值付给arr[left],注意,这时候arr[right]还是之前那个值</span></span><br><span class="line">    arr[left] = arr[right]</span><br><span class="line">    <span class="comment">// </span></span><br><span class="line">    <span class="keyword">while</span> (left &lt; right &amp;&amp; arr[left] &lt; basicValue) &#123;</span><br><span class="line">      left++</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 将</span></span><br><span class="line">    arr[right] = arr[left]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 这也就是为什么要将坐指针赋值给 基准值</span></span><br><span class="line">  arr[left] = basicValue</span><br><span class="line">  quickSort(arr, start, left<span class="number">-1</span>)</span><br><span class="line">  quickSort(arr, right+<span class="number">1</span>, end)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">5</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>]</span><br><span class="line">quickSort(arr, <span class="number">0</span>, arr.length - <span class="number">1</span>)</span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// [1, 2, 3, 4, 5, 6]</span></span><br></pre></td></tr></table></figure>
<p>分析: ↓<br>
<img src="/images/js_interview/2.jpg" alt="2.png"><br>
剩余未推导的可以自行推导下</p>
<p>题外话, js中数组中的两个数进行交换的额时候,可以这么操作 ↓<br>
<img src="/images/js_interview/3.png" alt="3.png"></p>
<h3 id="实现栈"><a class="header-anchor" href="#实现栈"></a>实现栈</h3>
<p>栈: 先进后出 (生活中的杯子)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Stack</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">this</span>.items = []</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  isEmpty() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.items.length === <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  size() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.items.length</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 往栈里 push 数据</span></span><br><span class="line">  push(value) &#123;</span><br><span class="line">    <span class="keyword">this</span>.items.push(value)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 删除栈顶的元素</span></span><br><span class="line">  pop() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.items.pop()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 查询栈顶的元素</span></span><br><span class="line">  peek() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.items[<span class="keyword">this</span>.items.length - <span class="number">1</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>栈的应用: 单纯的括号匹配问题<br>
(()) ==&gt; true<br>
{())} ==&gt; false</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parCheckerSingle</span>(<span class="params">string</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> s = <span class="keyword">new</span> Stack()</span><br><span class="line">  <span class="keyword">let</span> isMatch = <span class="literal">true</span></span><br><span class="line">  <span class="keyword">let</span> index = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (index &lt; string.length &amp;&amp; isMatch) &#123;</span><br><span class="line">    <span class="keyword">let</span> cur = string[index]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (cur === <span class="string">'('</span>) &#123;</span><br><span class="line">      s.push(cur)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (s.isEmpty()) &#123;</span><br><span class="line">        isMatch = <span class="literal">false</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        s.pop()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    index++</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (s.isEmpty() &amp;&amp; isMatch) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(parCheckerSingle(<span class="string">'(())'</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(parCheckerSingle(<span class="string">'(()'</span>)) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<p>**[{(**的匹配</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parChecker</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> s = <span class="keyword">new</span> Stack()</span><br><span class="line">  <span class="keyword">let</span> isMatch = <span class="literal">true</span></span><br><span class="line">  <span class="keyword">let</span> index = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (index &lt; str.length &amp;&amp; isMatch) &#123;</span><br><span class="line">    <span class="keyword">const</span> cur = str[index]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="string">'([&#123;'</span>.includes(cur)) &#123;</span><br><span class="line">      s.push(cur)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (s.isEmpty()) &#123;</span><br><span class="line">        isMatch = <span class="literal">false</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> top = s.pop()</span><br><span class="line">        <span class="keyword">if</span> (!matches(top, cur)) &#123;</span><br><span class="line">          isMatch = <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    index++</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (isMatch &amp;&amp; s.isEmpty()) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">matches</span>(<span class="params">open, close</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> opens = <span class="string">'([&#123;'</span></span><br><span class="line">  <span class="keyword">const</span> closes = <span class="string">')]&#125;'</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> opens.indexOf(open) === closes.indexOf(close)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(parChecker(<span class="string">'(&#123;[([])]&#125;)'</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(parChecker(<span class="string">'(&#123;[([]]&#125;)'</span>)) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<h3 id="实现队列"><a class="header-anchor" href="#实现队列"></a>实现队列</h3>
<p>队列: 先进先出 (生活中的管道)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Queue</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">this</span>.items = []</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  isEmpty() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.items.length === <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  size() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.items.length</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 入队, 末尾 push</span></span><br><span class="line">  enqueue(value) &#123;</span><br><span class="line">    <span class="keyword">this</span>.items.push(value)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 出队, shift 取出数组中的第一个, 第一个是最先入队的</span></span><br><span class="line">  dequeue() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.items.shift()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>队列的应用: 约瑟夫环<br>
就像小时候玩的&quot;点点点zhi&quot;, 点到那个那个淘汰, 最后留下来的人胜出</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">yueSeFu</span>(<span class="params">list, num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> q = <span class="keyword">new</span> Queue()</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; list.length; i++) &#123;</span><br><span class="line">    q.enqueue(list[i])</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (q.size() &gt; <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="comment">// 循环到num, 找到点到的那个人, 先出队,然后入队, 对列的长度还是不变的</span></span><br><span class="line">    <span class="comment">// 这个循环是为了将被点到的那个人防止队列的最前端</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; num; j++) &#123;</span><br><span class="line">      q.enqueue(q.dequeue())</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 删除当前的人</span></span><br><span class="line">    q.dequeue()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> q.dequeue()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(yueSeFu([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], <span class="number">7</span>)) <span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 第一次是从 2 开始数数的</span></span><br><span class="line"><span class="comment">// 第一次: 淘汰 3  / [4, 5, 1, 2]</span></span><br><span class="line"><span class="comment">// 第二次: 淘汰 2  / [4, 5, 1]</span></span><br><span class="line"><span class="comment">// 第三次: 淘汰 5  / [1, 4]</span></span><br><span class="line"><span class="comment">// 第四次: 淘汰 4  / [1]</span></span><br></pre></td></tr></table></figure>
<h3 id="none"><a class="header-anchor" href="#none"></a></h3>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/JavaScript/" rel="tag"># JavaScript</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/03/30/JavaScript/event_loop/" rel="next" title="Event Loop">
                <i class="fa fa-chevron-left"></i> Event Loop
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/04/01/Daily_English/April/04-01/" rel="prev" title="Daily English">
                Daily English <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Len lch</p>
              <p class="site-description motion-element" itemprop="description">this is my whole life!!!</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">91</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#实现一个new"><span class="nav-number">1.</span> <span class="nav-text">实现一个new</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实现一个json-stringify"><span class="nav-number">2.</span> <span class="nav-text">实现一个JSON.stringify</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实现一个json-parse"><span class="nav-number">3.</span> <span class="nav-text">实现一个JSON.parse</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#浅拷贝-深拷贝"><span class="nav-number">4.</span> <span class="nav-text">浅拷贝、深拷贝</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实现一个call"><span class="nav-number">5.</span> <span class="nav-text">实现一个call</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实现一个apply"><span class="nav-number">6.</span> <span class="nav-text">实现一个apply</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实现一个bind"><span class="nav-number">7.</span> <span class="nav-text">实现一个bind</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#当你刷新网页的时候-怎么知道用户在-看"><span class="nav-number">8.</span> <span class="nav-text">当你刷新网页的时候，怎么知道用户在“看”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#for-in-和-for-of-的区别"><span class="nav-number">9.</span> <span class="nav-text">for…in 和 for…of 的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#window-的-onload-事件和-documentcontentloaded-谁先谁后"><span class="nav-number">10.</span> <span class="nav-text">window 的 onload 事件和 documentContentLoaded 谁先谁后</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实现数组扁平化"><span class="nav-number">11.</span> <span class="nav-text">实现数组扁平化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实现一个防抖"><span class="nav-number">12.</span> <span class="nav-text">实现一个防抖</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实现一个节流"><span class="nav-number">13.</span> <span class="nav-text">实现一个节流</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实现一个instanceof"><span class="nav-number">14.</span> <span class="nav-text">实现一个instanceof</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#下面代码输出什么-为什么？"><span class="nav-number">15.</span> <span class="nav-text">下面代码输出什么, 为什么？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#下面代码输出什么"><span class="nav-number">16.</span> <span class="nav-text">下面代码输出什么 ?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#下面代码输出什么？"><span class="nav-number">17.</span> <span class="nav-text">下面代码输出什么？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实现下面这道题中的-machine-函数功能"><span class="nav-number">18.</span> <span class="nav-text">实现下面这道题中的 machine 函数功能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实现一个compose"><span class="nav-number">19.</span> <span class="nav-text">实现一个compose</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实现如下函数-可以批量请求数据-所有-url-地址在-urls-参数中-同时可以通过-max-参数控制请求的并发度-当所有的请求结束后-需要执行-callback-回调函数"><span class="nav-number">20.</span> <span class="nav-text">实现如下函数，可以批量请求数据，所有 URL 地址在 urls 参数中，同时可以通过 max 参数控制请求的并发度，当所有的请求结束后，需要执行 callback 回调函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#如何使-a-1-a-2-a-3-为-true"><span class="nav-number">21.</span> <span class="nav-text">如何使 a === 1 &amp;&amp; a === 2 &amp;&amp; a === 3 为 true</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实现快排"><span class="nav-number">22.</span> <span class="nav-text">实现快排</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实现栈"><span class="nav-number">23.</span> <span class="nav-text">实现栈</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实现队列"><span class="nav-number">24.</span> <span class="nav-text">实现队列</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#none"><span class="nav-number">25.</span> <span class="nav-text"></span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Len lch</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
